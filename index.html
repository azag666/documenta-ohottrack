<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API HotTrack - Guia de Integração ManyChat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #010409;
            color: #c9d1d9;
        }
        .code-block {
            background-color: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 16px;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
            font-size: 14px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .step-card {
            background: linear-gradient(145deg, #161b22, #0d1117);
            border: 1px solid #30363d;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1), 0 0 30px rgba(56, 189, 248, 0.05);
        }
        .step-number {
            background-color: #0c4a6e;
            color: #7dd3fc;
            border-radius: 9999px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.125rem;
            border: 1px solid #075985;
        }
        .manychat-ui {
            background-color: #ffffff;
            color: #1f2328;
            border-radius: 8px;
            border: 1px solid #d0d7de;
            padding: 16px;
            margin-top: 16px;
        }
        .manychat-ui strong { color: #0969da; }
        .manychat-ui code { background-color: #f6f8fa; color: #1f2328; border: 1px solid #d0d7de; }
        h1, h2, h3 { color: #f0f6fc; }
        .highlight { color: #7dd3fc; }
    </style>
</head>
<body class="antialiased">

    <div class="max-w-4xl mx-auto p-4 md:p-8">

        <header class="text-center mb-16">
            <div class="inline-block bg-sky-500/10 text-sky-400 font-bold py-2 px-4 rounded-full mb-4">
                GUIA DE INTEGRAÇÃO
            </div>
            <h1 class="text-5xl font-extrabold text-white tracking-tight">API HotTrack + ManyChat</h1>
            <p class="text-xl text-slate-400 mt-4">Um guia visual para configurar sua automação do zero, mesmo que você nunca tenha usado o ManyChat.</p>
        </header>

        <main class="space-y-16">

            <section id="preparacao">
                <h2 class="text-3xl font-bold mb-6 flex items-center gap-3">
                    <div class="step-number">0</div> Preparando seu ManyChat
                </h2>
                <div class="step-card space-y-4">
                    <p>Antes de usar a API, precisamos "preparar o terreno" no seu ManyChat. Isso envolve criar campos para guardar suas informações importantes. Fazemos isso uma única vez.</p>
                    <div class="bg-slate-800/80 p-4 rounded-md border border-slate-700">
                        <h3 class="font-semibold text-lg text-white">1. Crie uma Variável para sua Chave de API</h3>
                        <p class="text-slate-400 text-sm">Esta variável guardará sua chave secreta da API HotTrack. Como ela é a mesma para o bot inteiro, usamos uma **Variável de Bot**.</p>
                        <p class="text-sm mt-2">➡️ No ManyChat, vá em: <strong>Configurações</strong> > <strong>Campos</strong> > <strong>+ Novo Campo de Bot</strong>. Crie com o nome <code>hottrack_api_key</code> e cole sua chave lá dentro.</p>
                    </div>
                    <div class="bg-slate-800/80 p-4 rounded-md border border-slate-700">
                        <h3 class="font-semibold text-lg text-white">2. Crie Variáveis para os Leads</h3>
                        <p class="text-slate-400 text-sm">Estas variáveis guardarão as informações de cada cliente (lead). Como cada cliente tem dados diferentes, usamos uma **Variável de Usuário**.</p>
                        <p class="text-sm mt-2">➡️ No ManyChat, vá em: <strong>Configurações</strong> > <strong>Campos</strong> > <strong>+ Novo Campo de Usuário</strong>. Crie todas as variáveis que vamos usar nos próximos passos:</p>
                        <ul class="text-sm list-disc list-inside mt-2 space-y-1">
                            <li><code>click_id</code> (Tipo: Texto)</li>
                            <li><code>pix_copia_e_cola</code> (Tipo: Texto)</li>
                            <li><code>pix_status</code> (Tipo: Texto)</li>
                            <li><code>lead_cidade</code> (Tipo: Texto)</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <section id="gerar-pix">
                <h2 class="text-3xl font-bold mb-6 flex items-center gap-3">
                    <div class="step-number">1</div> Gerar uma Cobrança PIX
                </h2>
                <div class="space-y-6">
                    <div class="step-card">
                        <h3 class="text-xl font-bold text-white mb-2">Passo 1: A Ação "Solicitação Externa"</h3>
                        <p class="text-slate-400">Em seu fluxo, adicione uma nova Ação e procure por <strong>"Solicitação Externa"</strong> (External Request). É aqui que a mágica acontece. Preencha o campo de URL assim:</p>
                        <div class="manychat-ui">
                            <p><strong>Tipo de Pedido:</strong> <code class="font-bold">POST</code></p>
                            <p><strong>Solicitar URL:</strong> <code>https://hottrack.vercel.app/api/pix/generate</code></p>
                        </div>
                    </div>
                    <div class="step-card">
                        <h3 class="text-xl font-bold text-white mb-2">Passo 2: Cabeçalho (Headers) - Sua Autenticação</h3>
                        <p class="text-slate-400">O cabeçalho é como seu "crachá de acesso" para a API. Clique na aba <strong>"Cabeçalho"</strong> e adicione sua chave.</p>
                         <div class="manychat-ui">
                            <p><code>x-api-key</code> : <code>{{hottrack_api_key}}</code></p>
                        </div>
                    </div>
                    <div class="step-card">
                        <h3 class="text-xl font-bold text-white mb-2">Passo 3: Corpo (Body) - Os Dados da Cobrança</h3>
                        <p class="text-slate-400">Clique na aba <strong>"Corpo"</strong>. Aqui você informa para qual lead e qual valor o PIX deve ser gerado. Lembre-se que o valor é em <strong>centavos</strong> (R$ 19,90 = 1990).</p>
                        <div class="manychat-ui">
<pre class="code-block" style="background-color: #f6f8fa; color: #1f2328;">{
  "click_id": "{{click_id}}",
  "value_cents": 1990
}</pre>
                        </div>
                    </div>
                     <div class="step-card">
                        <h3 class="text-xl font-bold text-white mb-2">Passo 4: Mapeamento de Respostas - Salvando o PIX</h3>
                        <p class="text-slate-400">Na aba <strong>"Mapeamento de Respostas"</strong>, vamos pegar o PIX gerado e salvar nas variáveis que criamos. O "JSONPath" é o "endereço" da informação na resposta.</p>
                        <div class="manychat-ui">
                            <p><code>$.qr_code_text</code> ➔ Salvar em <strong><code>pix_copia_e_cola</code></strong></p>
                        </div>
                        <p class="text-slate-300 mt-4">Pronto! Agora é só adicionar um bloco de mensagem e enviar o <code>{{pix_copia_e_cola}}</code> para seu cliente.</p>
                    </div>
                </div>
            </section>
            
            <section id="consultar-status">
                <h2 class="text-3xl font-bold mb-6 flex items-center gap-3">
                    <div class="step-number">2</div> Consultar Status do PIX
                </h2>
                 <div class="space-y-6">
                    <div class="step-card">
                        <h3 class="text-xl font-bold text-white mb-2">Passo 1 e 2: Ação e Cabeçalho</h3>
                        <p class="text-slate-400">Adicione outra Ação de <strong>"Solicitação Externa"</strong>. A URL e o Cabeçalho são muito parecidos com o passo anterior.</p>
                        <div class="manychat-ui">
                            <p><strong>Tipo de Pedido:</strong> <code class="font-bold">POST</code></p>
                            <p><strong>Solicitar URL:</strong> <code>https://hottrack.vercel.app/api/pix/check-status</code></p>
                            <p><strong>Cabeçalho:</strong> <code>x-api-key</code> : <code>{{hottrack_api_key}}</code></p>
                        </div>
                    </div>
                    <div class="step-card">
                        <h3 class="text-xl font-bold text-white mb-2">Passo 3: Corpo (Body)</h3>
                        <p class="text-slate-400">No corpo, só precisamos informar de qual lead queremos verificar o pagamento.</p>
                        <div class="manychat-ui">
<pre class="code-block" style="background-color: #f6f8fa; color: #1f2328;">{
  "click_id": "{{click_id}}"
}</pre>
                        </div>
                    </div>
                     <div class="step-card">
                        <h3 class="text-xl font-bold text-white mb-2">Passo 4: Mapeamento e Condição</h3>
                        <p class="text-slate-400">Na aba <strong>"Mapeamento de Respostas"</strong>, salve o status do pagamento na sua variável.</p>
                        <div class="manychat-ui">
                            <p><code>$.status</code> ➔ Salvar em <strong><code>pix_status</code></strong></p>
                        </div>
                        <p class="text-slate-300 mt-4">Após esta ação, adicione um passo de <strong>"Condição"</strong>. Crie uma regra: "Se <code>{{pix_status}}</code> for <code>paid</code>". Se a condição for verdadeira, entregue o produto. Se não, continue aguardando.</p>
                    </div>
                </div>
            </section>

            <section id="consultar-cidade">
                 <h2 class="text-3xl font-bold mb-6 flex items-center gap-3">
                    <div class="step-number">3</div> Consultar Cidade do Lead
                </h2>
                <div class="space-y-6">
                    <div class="step-card">
                        <h3 class="text-xl font-bold text-white mb-2">Passo 1 a 3: Configuração da Chamada</h3>
                        <p class="text-slate-400">Adicione uma Ação de <strong>"Solicitação Externa"</strong> e configure a URL, Cabeçalho e Corpo para identificar o lead.</p>
                        <div class="manychat-ui">
                            <p><strong>URL:</strong> <code>https://hottrack.vercel.app/api/click/info</code></p>
                            <p><strong>Cabeçalho:</strong> <code>x-api-key</code> : <code>{{hottrack_api_key}}</code></p>
                            <p><strong>Corpo:</strong> <code>{"click_id": "{{click_id}}"}</code></p>
                        </div>
                    </div>
                     <div class="step-card">
                        <h3 class="text-xl font-bold text-white mb-2">Passo 4: Mapeamento dos Dados</h3>
                        <p class="text-slate-400">Na aba <strong>"Mapeamento de Respostas"</strong>, salve a cidade do seu lead.</p>
                        <div class="manychat-ui">
                            <p><code>$.city</code> ➔ Salvar em <strong><code>lead_cidade</code></strong></p>
                        </div>
                        <p class="text-slate-300 mt-4">Perfeito! Agora você pode usar <code>{{lead_cidade}}</code> em qualquer mensagem para criar uma conexão instantânea com seu cliente. Ex: "E aí! Vi que você é de <strong>{{lead_cidade}}</strong>, que legal!".</p>
                    </div>
                </div>
            </section>
        </main>
    </div>
</body>
</html>
